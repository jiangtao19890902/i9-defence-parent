<div id='selfMain'>
    <div id="selfMap">
        <!-- <div class='info'>
            <div class="infoTitle"><p>国际创业中心</p> <span class='closeInfo'>x</span></div>
            <table class='infoBody' cellspacing='0'>
                <tr>
                    <th><i class='mIcon icon-address'></i>地址</th>
                    <th><i class='mIcon icon-floorArea'></i>建筑面积</th>
                    <th><i class='mIcon icon-device'></i>消防设备</th>
                </tr>
                <tr>
                    <td>华苑产业园华天道2号</td>
                    <td>2000平米</td>
                    <td>
                        <p>A设备:200台</p>
                        <p>B设备:200台</p>
                        <p>C设备:200台</p>
                    </td>
                </tr>
                <tr>
                    <th><i class='mIcon icon-clients'></i>所属客户</th>
                    <th><i class='mIcon icon-charges'></i>安全负责人</th>
                    <th><i class='mIcon icon-phone'></i>联系电话</th>
                </tr>
                <tr>
                    <td>国创中心</td>
                    <td>李某</td>
                    <td>
                        <p>022-28978989</p>
                        <p>022-22222222</p>
                    </td>
                </tr>
            </table>
            <div class="icon icon-arrowDown"></div>
        </div> -->
    </div>
    <div id='projectList'>
        <div class="projectTitle">
            <select class="form-control blue_bg areaItem" ng-model="selected" ng-options="s.name for s in division" ng-change="c()">
              <option value=''>请选择</option>
            </select>
            <select class="form-control blue_bg areaItem"  ng-model="selected2" ng-options="sh.name for sh in selected.child" ng-change="c2()">
              <option value=''>请选择</option>
            </select>
            <!-- <div class="provinceArea areaItem">省区域<i class='mIcon icon-select'></i></div>
            <div class="cityArea areaItem">市区域<i class='mIcon icon-select'></i></div> -->
        </div>
        <div class="projectBody">
            <div class="searchItem">
                <input type="text" mg-model='searchText' placeholder='输入查找设备名称'/>
                <i class='mIcon icon-search' ng-click='pageInit()'></i>
            </div>
            <ul class="projectNameList">
                <li>国创中心</li>                
            </ul>
            <!-- <div id='loadMore'>下拉展开更多…</div> -->
        </div>
    </div>
    <!-- <div id='chartData'>
        <div class="sTitle">
            <p class='text'>隐患统计台</p>
            <p class='tools'>
                <span class='active'>年<i class='mIcon icon-radio'></i></span>
                <span>月<i class='mIcon icon-radio'></i></span>
                <span>日<i class='mIcon icon-radio'></i></span>
            </p>
        </div>
        <div class="chartBody" id='chartBody'>
            <div e-chart options="option"></div>
        </div>
    </div>
    <div id="pieChart">
        <div class="sTitle">
            <div class="text">设备分布饼图</div>
        </div>
        <div class="chartBody" id='pieChartBody'>
            <div e-chart options="pieOption"></div>
        </div>
    </div> -->
</div>

<!-- <script type="text/javascript">
    var mainHeight = $(window).height()-50;
    console.log(mainHeight);
    $('#selfMain').height(mainHeight);
    var windowHeight = document.body.clientHeight,mapZoom=4;
    if(windowHeight<720){
        mapZoom=3;
    }else if(windowHeight>1300 && windowHeight<2700){
        mapZoom = 5;
    }else if(windowHeight>=2700){
        mapZoom = 6;
    }else{
        mapZoom = 4;
    }
    
    var myData = {'mark':[
            {'positionX':'116.368904','positionY':'39.923423','text':'提示内容1'},
            {'positionX':'116.382122','positionY':'39.921176','text':'提示内容2'},
            {'positionX':'116.387271','positionY':'39.922501','text':'提示内容3'},
            {'positionX':'116.398258','positionY':'39.914600','text':'提示内容4'}
        ]}
    var oHtml = "<div class='prompt'><p>提示内容</p></div>"
    var map = new AMap.Map("selfMap", {
        zoom:mapZoom,
        zooms:[mapZoom,mapZoom],
        center:[117.190182,39.125596],
        mapStyle: 'amap://styles/9ef8e635e3bae06c3f40563eee898c64',//样式URL
        resizeEnable:true,
    });
    var infoWindow = new AMap.InfoWindow({
        isCustom:true,
        autoMove:true,
        // closeWhenClickMap:true,
        offset: new AMap.Pixel(0, -50),
    });
    var oHtml="";
    for(var i=0;i<myData.mark.length;i++){
        oHtml = "<div class='info'><div class='infoTitle'>"+myData.mark[i].text+"<span class='closeInfo' onclick='closeInfoWindow()'>x</span></div><table class='infoBody' cellspacing='0'><tr><th><i class='mIcon icon-address'></i>地址</th><th><i class='mIcon icon-floorArea'></i>建筑面积</th><th><i class='mIcon icon-device'></i>消防设备</th></tr><tr><td>华苑产业园华天道2号</td><td>2000平米</td><td><p>A设备:200台</p><p>B设备:200台</p><p>C设备:200台</p></td></tr><tr><th><i class='mIcon icon-clients'></i>所属客户</th><th><i class='mIcon icon-charges'></i>安全负责人</th><th><i class='mIcon icon-phone'></i>联系电话</th></tr><tr><td>国创中心</td><td>李某</td><td><p>022-28978989</p><p>022-22222222</p></td></tr></table><div class='mIcon icon-arrowDown'></div></div>";
        marker = new AMap.Marker({
            position: [myData.mark[i].positionX,myData.mark[i].positionY],
            zIndex: 101,
            map: map
        });
        marker.content = oHtml;
        marker.on('click', markerClick);
    }
    function markerClick(e) {
        infoWindow.setContent(e.target.content);
        infoWindow.open(map, e.target.getPosition());
    }
    //关闭信息窗体
    function closeInfoWindow() {
       map.clearInfoWindow();
    }
    $(function () {
        // 右侧样式
        var mainWidth = parseInt($('#selfMain').width()*0.03);
        var rightWidth = parseInt($('#selfMain').width()*0.2);
        // $('#projectList,#pieChart').css({'right':mainWidth+'px','width':rightWidth+'px'});
        $('#projectList').css({'right':mainWidth+'px','width':rightWidth+'px'});
        // var projectListHeight = parseInt($('#selfMain').height()*0.7-136);
        var projectListHeight = parseInt($('#selfMain').height()-100);
        $('#projectList .projectNameList').css('height',projectListHeight+'px');
        
        // 图表样式
        /*var chartBodyHeight = parseInt($('#selfMain').height()*0.3-40);
        $('#chartData .chartBody,#pieChart .chartBody').css('height',chartBodyHeight+'px');*/



        // 加载更多
        $('#loadMore').click(function () {
            var listHeight = parseInt($('#selfMain').height());
            $('.projectNameList').css('height',listHeight+'px');
            $('#loadMore').hide();
        });

        //图标日期选择
        $('#chartData .tools span').click(function () {
            $(this).addClass('active').siblings().removeClass('active');
        });
        
    })
    
    // map.setFitView();
</script> -->